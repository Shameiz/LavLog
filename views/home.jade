extends layout

block content
  .container-fluid
    if messages.error
      .alert.alert-danger(role='alert')
        for error in messages.error
          div= error.msg
    if messages.success
      .alert.alert-success(role='alert')
        for success in messages.success
          div= success.msg
    if messages.info
      .alert.alert-info(role='alert')
        for info in messages.info
          div= info.msg
    
    if user
      .wrapper
        span#time(style="color:#fff;font-size:74px;") "00:00:00"
        button.button.but-pad Start
        script.
          window.raf = (function() {
            return window.requestAnimationFrame ||
              window.webkitRequestAnimationFrame ||
              window.mozRequestAnimationFrame ||
              function(callback) {
                window.setTimeout(callback, 1000 / 60);
              };
            })();

            function Timer() {
            this.start();
            return this;
            };

            Timer.prototype = {
            /**
             * Starts the timer
             * @chainable
             */
            start: function() {
              this.startTime = Date.now();
              return this;
            },

            /**
             * Returns an object of the elapsed time
             * @return {Object} { hours, minutes, seconds }
             */
            getElapsedTime: function() {
              var d= new Date();
              var hours = 23-d.getHours();
              var minutes = 60-d.getMinutes();
              var seconds = 60-d.getSeconds();

              return {
                hours: pad(hours, 2),
                minutes: pad(minutes, 2),
                seconds: pad(seconds, 2)
              };
            }
            };

            function pad(number, length) {
            var str = '' + number;
            while (str.length < length) {
              str = '0' + str;
            }
            return str;
            }

            var timer = new Timer();
            var output = document.getElementById('time');

            (function update() {
            var time = timer.getElapsedTime();
            output.textContent = time.hours + ':' + time.minutes + ':' + time.seconds;
            raf(update);
            })();
    
    else      
      .wrapper
        h1 LavLog
        button.button.but-pad Login
        button.button.but-pad Register

        
